<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>App Dentista</title>
</head>
<body>
    <h1>Bienvenido a la app del Dentista</h1>
    <button id="test-button">Probar conexion</button>

    <script type="module">
        // Configuracion de firebase
        import { initializeApp } from
    "https://gstatic.com/firebasejs/9.6.1/firebase-app.js"
        import { getAuth, signInAnonymously } from
    "https://gstatic.com/firebasejs/9.6.1/firebase-auth.js"
        import { getFirestore, collection, addDoc } from
    "https://gstatic.com/firebasejs/9.6.1/firebase-firestore.js"

    const firebaseConfig = {
        apiKey: "AIzaSyAmuMId-e9LiO0cxadGRtxYBK9Tqi2khdI",
        authDomain: "dentist-app-2bb07.firebaseapp.com",
        projectId: "dentist-app-2bb07",
        storageBucket: "dentist-app-2bb07.firebasestorage.app",
        messagingSenderId: "410183687912",
        appId: "1:410183687912:web:43ee87e4a9122edb74b35d"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);

        // Login anonimo 
        signInAnonymously(auth)
            .then(() => console.log("Autenticacion anonimamente"))
            .catch((error) => console.error(error));

        // Boton para probar firestore
        const testButton = document.getElementById("test-button");
        testButton.addEventListener("click", async () => {
            try {
                const docRef = await addDoc(collection(db, "pacientes"),{
                    nombre: "Paciente de preba",
                    creado: new Date()
                });
                alert('Paciente creado con ID: $(docRef.id)');
            } catch (e) {
                console.error("Error al guardar en Firestore: ", e);
            }
        });
    </script>
</body>
</html>